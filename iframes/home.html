<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <title>Orange Button with Iframe Popups</title>
  <style>
    :root {
      --orange-bg: #342400;
      --orange-border: #934c00;
      --pattern-color: rgba(255, 182, 106, 0.15);
      --dark-bg: #1c1c1c;
      --dark-border: #242424;
      --text-light: #f0e6c8;
    }

    body {
      margin: 0;
      padding: 0;
      background: #181818;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      height: 100vh;
      overflow: hidden;
    }

    .container {
      position: absolute;
      bottom: 20px;
      right: 50px;
      z-index: 10;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem;
      width: 90vw;
      max-width: 600px;
    }

    button {
      border: none;
      cursor: pointer;
      font-weight: 700;
      border-radius: 1.5rem;
      transition: background 0.3s ease, box-shadow 0.3s ease;
      user-select: none;
      position: relative;
      overflow: hidden;
    }

    .orange-btn {
      grid-column: span 2;
      color: var(--orange-border);
      padding: 2.8rem 0;
      font-size: 3rem;
      outline: 1px solid var(--orange-border);
      background-color: var(--orange-bg);
      border-radius: 40px;
    }

    .orange-btn::before {
      content: "";
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      pointer-events: none;
      background-image: repeating-linear-gradient(
        45deg,
        rgba(255, 182, 106, 0.35) 0,
        rgba(255, 182, 106, 0.35) 6px,
        transparent 6px,
        transparent 10px
      );
      border-radius: 1.5rem;
      opacity: 0.7;
      mix-blend-mode: overlay;
      z-index: 0;
    }

    .orange-btn > * {
      position: relative;
      z-index: 1;
    }

    .orange-btn:hover {
      background-color: #4d3b00;
    }

    .square-btn {
      height: 180px;
      width: 100%;
      background: var(--dark-bg);
      color: #4e4e4e;
      border: 1.5px solid var(--dark-border);
      font-size: 2.4rem;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
      transition: all 0.3s ease;
      border-radius: 40px;
    }

    .square-btn:hover {
      transform: translateY(-5px);
    }

    .square-tiny {
      height: 90px;
    }

#modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw; /* full viewport width */
  height: 100vh; /* full viewport height */
  display: none;
  justify-content: center;
  align-items: center;
  background: rgba(0, 0, 0, 0.8);
  z-index: 999;
  overflow: hidden;
}

#modal.active {
  display: flex;
}

#modal iframe {
  width: 100%;
  height: 100%;
  border: none;
  background: #222;
}


    #modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: none;
      justify-content: center;
      align-items: center;
      background: rgba(0, 0, 0, 0.8);
      z-index: 999;
      overflow: hidden;
    }

    #modal.active {
      display: flex;
    }

    #modal iframe {
      width: 100%;
      height: 100%;
      border: none;
      background: #222;
      transform-origin: center center;
      transition: transform 0.3s ease;
    }

    .hamburger-btn {
      position: fixed;
      top: 10px;
      left: 80px;
      z-index: 1001;
      background-color: #1c1c1c;
      border: 3px solid #242424;
      color: #3a3a3a;
      border-radius: 55px;
      padding: 12px 16px;
      font-size: 20px;
      cursor: pointer;
    }

    .sidebar {
      position: fixed;
      top: 0;
      right: -400px;
      width: 80%;
      max-width: 300px;
      height: 100vh;
      background-color: #1c1c1c;
      border-right: 3px solid #242424;
      display: flex;
      flex-direction: column;
      padding: 20px;
      transition: right 0.3s ease;
      z-index: 1002;
    }

    .sidebar.open {
      right: 0;
    }

    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      display: none;
    }

    .overlay.show {
      display: block;
    }

    .top-buttons button {
      width: 100%;
      padding: 18px;
      margin-bottom: 15px;
      font-size: 18px;
      background-color: #252525;
      border: 3px solid #2c2c2c;
      color: white;
      border-radius: 40px;
      cursor: pointer;
    }

    .top-buttons button:hover {
      background: #555;
    }

    /* Resolution Changer Styles */
    .resolution-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #1c1c1c;
      padding: 20px;
      border-radius: 15px;
      border: 3px solid #242424;
      z-index: 1003;
      display: none;
      color: white;
    }

    .resolution-popup.show {
      display: block;
    }

    .resolution-options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-top: 15px;
    }

    .resolution-option {
      padding: 10px;
      background: #252525;
      border: 2px solid #2c2c2c;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .resolution-option:hover {
      background: #555;
    }

    /* Filter Menu Styles */
    .filter-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #1c1c1c;
      padding: 20px;
      border-radius: 15px;
      border: 3px solid #242424;
      z-index: 1003;
      display: none;
      color: white;
    }

    .filter-popup.show {
      display: block;
    }

    .filter-options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-top: 15px;
    }

    .filter-option {
      padding: 10px;
      background: #252525;
      border: 2px solid #2c2c2c;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .filter-option:hover {
      background: #555;
    }

    .filter-option.active {
      background: #934c00;
      border-color: #ff8c00;
    }

    i {
      color: var(--accent-color);
    }

          #pingDisplay {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #1c1c1c;
        color: #00ff00;
        padding: 10px 15px;
        border-radius: 8px;
        border: 2px solid #00ff0033;
        font-family: monospace;
        display: none;
        z-index: 1000;
      }

  </style>
</head>
<body>

  <button class="hamburger-btn" id="hamburger" onclick="openSidebar()"><i class="fas fa-ellipsis-v"></i></button>

  <div class="sidebar" id="sidebar">
    <div class="top-buttons">
      <button class="square-btn square-tiny" onclick="openResolutionChanger()">Resolution changer</button>
      <button class="square-btn square-tiny" onclick="openFilterMenu()">Visual Filters</button>
      <button class="square-btn square-tiny" onclick="togglePingCounter()">Ping Counter</button>

      <button onclick="closeSidebar()">Close Menu</button>
    </div>
    <div id="pingDisplay" style="display: none; padding: 10px; background: rgba(0,0,0,0.7); color: white; text-align: center; border-radius: 5px; margin: 10px 0;">Ping: --ms</div>
  
  </div>

  <!-- Filter Menu Popup -->
  <div class="filter-popup" id="filterPopup">
    <h3>Visual Filters</h3>
    <div class="filter-options">
      <button class="filter-option" onclick="toggleFilter(this, 'none')">No Filter</button>
      <button class="filter-option" onclick="toggleFilter(this, 'grayscale(100%)')">Grayscale</button>
      <button class="filter-option" onclick="toggleFilter(this, 'sepia(100%)')">Sepia</button>
      <button class="filter-option" onclick="toggleFilter(this, 'blur(2px)')">Blur</button>
      <button class="filter-option" onclick="toggleFilter(this, 'brightness(150%)')">Bright</button>
      <button class="filter-option" onclick="toggleFilter(this, 'contrast(150%)')">High Contrast</button>
      <button class="filter-option" onclick="toggleFilter(this, 'invert(100%)')">Invert</button>
      <button class="filter-option" onclick="toggleFilter(this, 'hue-rotate(180deg)')">Color Shift</button>
    </div>
    <button class="square-btn" style="margin-top: 15px;" onclick="closeFilterMenu()">Close</button>
  </div>

  <!-- Resolution Changer Popup -->
  <div class="resolution-popup" id="resolutionPopup">
    <h3>Change Resolution</h3>
    <div class="resolution-options">
      <button class="resolution-option" onclick="changeResolution('1920px', '1080px')">1920x1080</button>
      <button class="resolution-option" onclick="changeResolution('1280px', '720px')">1280x720</button>
      <button class="resolution-option" onclick="changeResolution('800px', '600px')">800x600</button>
    </div>
    <button class="square-btn" style="margin-top: 15px;" onclick="closeResolutionChanger()">Close</button>
  </div>

  <div class="container">
    <div class="grid">
      <button class="orange-btn" onclick="shareBloxdforge()">Share BloxdForge!</button>
      <button class="square-btn" data-link="https://bloxd.io/">Bloxd</button>
      <button class="square-btn" data-link="https://beta.bloxd.io/">Beta</button>
    </div>
  </div>

  <div id="modal">
    <iframe src="" allowfullscreen></iframe>
  </div>

  <script>

          let pingInterval = null;
    
      async function togglePingCounter() {
        const display = document.getElementById('pingDisplay');
        const isVisible = display.style.display === 'block';
        
        if (isVisible) {
          display.style.display = 'none';
          if (pingInterval) {
            clearInterval(pingInterval);
            pingInterval = null;
          }
        } else {
          display.style.display = 'block';
          try {
            await checkPing();
            if (pingInterval) clearInterval(pingInterval);
            pingInterval = setInterval(checkPing, 3000);
          } catch (error) {
            console.error('Ping check failed:', error);
            display.textContent = 'Ping: Error';
          }
        }
        closeSidebar();
      }
    
      async function checkPing() {
        const display = document.getElementById('pingDisplay');
        const start = Date.now();
        
        // Try multiple endpoints in case one fails
        const endpoints = [
          window.location.origin + '/?ping=' + Date.now(),
          'https://httpbin.org/get?ping=' + Date.now(),
          'https://www.google.com/favicon.ico?t=' + Date.now()
        ];

        for (const url of endpoints) {
          try {
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 3000);
            
            const response = await fetch(url, {
              method: 'HEAD',
              cache: 'no-store',
              mode: 'no-cors',
              signal: controller.signal
            });
            
            clearTimeout(timeoutId);
            
            // If we get here, the request was successful
            const latency = Date.now() - start;
            display.textContent = `Ping: ${latency}ms`;
            display.style.color = latency < 100 ? '#4caf50' : latency < 300 ? '#ff9800' : '#f44336';
            return latency;
            
          } catch (e) {
            console.warn(`Ping attempt to ${new URL(url).hostname} failed, trying next endpoint...`, e);
            // Continue to next endpoint
          }
        }
        
        // If we get here, all endpoints failed
        display.textContent = 'Ping: Offline';
        display.style.color = '#f44336';
        throw new Error('All ping attempts failed');
      }

    function openModal(link) {
      const modal = document.getElementById('modal');
      modal.innerHTML = `<iframe src="${link}"></iframe>`;
      modal.classList.add('active');
    }

    function closeModal() {
      const modal = document.getElementById('modal');
      modal.classList.remove('active');
      modal.innerHTML = '';
    }

    function openSidebar() {
      document.getElementById('sidebar').classList.add('open');
      document.getElementById('overlay').classList.add('show');
    }

    function closeSidebar() {
      document.getElementById('sidebar').classList.remove('open');
      document.getElementById('overlay').classList.remove('show');
    }

    function openResolutionChanger() {
      document.getElementById('resolutionPopup').classList.add('show');
      document.getElementById('overlay').classList.add('show');
      closeSidebar();
    }

    function closeResolutionChanger() {
      document.getElementById('resolutionPopup').classList.remove('show');
      document.getElementById('overlay').classList.remove('show');
    }

    function changeResolution(width, height) {
      const iframe = document.querySelector('#modal iframe');
      if (iframe) {
        if (width === '100%' && height === '100%') {
          iframe.style.width = '100%';
          iframe.style.height = '100%';
          iframe.style.transform = 'none';
          iframe.style.position = 'relative';
        } else {
          // Set the base resolution
          iframe.style.width = width;
          iframe.style.height = height;
          
          // Calculate scale to fit screen while maintaining aspect ratio
          const viewportWidth = window.innerWidth;
          const viewportHeight = window.innerHeight;
          const iframeWidth = parseInt(width);
          const iframeHeight = parseInt(height);
          
          const scaleX = viewportWidth / iframeWidth;
          const scaleY = viewportHeight / iframeHeight;
          const scale = Math.min(scaleX, scaleY);
          
          // Apply the transformation
          iframe.style.position = 'absolute';
          iframe.style.top = '50%';
          iframe.style.left = '50%';
          iframe.style.transform = `translate(-50%, -50%) scale(${scale})`;
          iframe.style.transformOrigin = 'center center';
        }
      }
      closeResolutionChanger();
    }

    function openFilterMenu() {
      document.getElementById('filterPopup').classList.add('show');
      document.getElementById('overlay').classList.add('show');
      closeSidebar();
    }

    function closeFilterMenu() {
      document.getElementById('filterPopup').classList.remove('show');
      document.getElementById('overlay').classList.remove('show');
    }

    function toggleFilter(button, filterValue) {
      const iframe = document.querySelector('#modal iframe');
      if (iframe) {
        // Remove active class from all filter options
        document.querySelectorAll('.filter-option').forEach(btn => {
          btn.classList.remove('active');
        });
        
        // Add active class to selected filter
        if (filterValue !== 'none') {
          button.classList.add('active');
        }
        
        // Apply the filter
        iframe.style.filter = filterValue;
      }
      closeFilterMenu();
    }

    document.querySelectorAll('.square-btn[data-link]').forEach(button => {
      button.addEventListener('click', () => openModal(button.dataset.link));
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeModal();
        closeSidebar();
        closeResolutionChanger();
        closeFilterMenu();
      }
    });
  </script>
</body>
</html>
